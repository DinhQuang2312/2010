<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
		/>
		<title>Ch√∫c m·ª´ng 20/10</title>
		<link
			href="https://fonts.googleapis.com/css2?family=Mali:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;1,200;1,300;1,400;1,500;1,600;1,700&display=swap"
			rel="stylesheet"
		/>
		<style>
			* {
				margin: 0;
				padding: 0;
				box-sizing: border-box;
			}

			body {
				margin: 0;
				padding: 0;
				background: linear-gradient(135deg, #fffafa);
				overflow: hidden;
				font-family: 'Mali', cursive;
				height: 100vh;
				position: relative;
			}

			.center-message {
				position: absolute;
				top: 50%;
				left: 50%;
				transform: translate(-50%, -50%);
				background: linear-gradient(
					135deg,
					rgba(255, 255, 255, 0.95),
					rgba(255, 240, 245, 0.9)
				);
				padding: 40px 50px;
				border-radius: 30px;
				font-size: 1.6rem;
				font-weight: 400;
				color: #c2185b;
				text-align: center;
				box-shadow: 0 20px 60px rgba(216, 27, 96, 0.3),
					0 0 0 1px rgba(255, 255, 255, 0.5) inset;
				z-index: 1;
				max-width: 90%;
				animation: pulse 3s ease-in-out infinite;
				backdrop-filter: blur(10px);
				border: 2px solid rgba(255, 255, 255, 0.3);
			}

			@keyframes pulse {
				0%,
				100% {
					transform: translate(-50%, -50%) scale(1);
				}

				50% {
					transform: translate(-50%, -50%) scale(1.05);
				}
			}

			.center-message strong {
				display: block;
				font-size: 2rem;
				margin-bottom: 15px;
				font-weight: 700;
				background: linear-gradient(45deg, #d81b60, #f06292, #d81b60);
				background-size: 200% auto;
				-webkit-background-clip: text;
				-webkit-text-fill-color: transparent;
				animation: gradient 3s ease infinite;
			}

			@keyframes gradient {
				0%,
				100% {
					background-position: 0% 50%;
				}

				50% {
					background-position: 100% 50%;
				}
			}

			.overlay {
				position: fixed;
				top: 0;
				left: 0;
				width: 100vw;
				height: 100vh;
				background: rgba(0, 0, 0, 0.5);
				backdrop-filter: blur(5px);
				z-index: 99;
				display: none;
				animation: fadeInOverlay 0.3s ease;
			}

			@keyframes fadeInOverlay {
				from {
					opacity: 0;
				}

				to {
					opacity: 1;
				}
			}

			.overlay.active {
				display: block;
			}

			.popup {
				position: fixed;
				top: 50%;
				left: 50%;
				transform: translate(-50%, -50%) scale(0.8);
				background: linear-gradient(135deg, #ffffff 0%, #fff5f8 100%);
				border-radius: 25px;
				box-shadow: 0 25px 80px rgba(216, 27, 96, 0.4);
				padding: 30px;
				text-align: center;
				z-index: 100;
				width: 90%;
				max-width: 400px;
				display: none;
				animation: popupShow 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55)
					forwards;
				border: 3px solid rgba(255, 255, 255, 0.8);
			}

			@keyframes popupShow {
				from {
					opacity: 0;
					transform: translate(-50%, -50%) scale(0.5) rotate(-5deg);
				}

				to {
					opacity: 1;
					transform: translate(-50%, -50%) scale(1) rotate(0deg);
				}
			}

			@keyframes bounce {
				0%,
				100% {
					transform: translateX(-50%) translateY(0);
				}

				50% {
					transform: translateX(-50%) translateY(-10px);
				}
			}

			.popup-content {
				margin-top: 20px;
			}

			.popup img {
				max-width: 100%;
				border-radius: 15px;
				margin-bottom: 20px;
				box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
				border: 3px solid white;
			}

			.popup p {
				font-size: 1.1rem;
				color: #d81b60;
				line-height: 1.6;
				margin-bottom: 20px;
				font-weight: 500;
			}

			.popup button {
				margin-top: 10px;
				background: linear-gradient(135deg, #d81b60 0%, #f06292 100%);
				color: white;
				border: none;
				padding: 12px 30px;
				border-radius: 25px;
				cursor: pointer;
				font-size: 1rem;
				font-weight: 600;
				box-shadow: 0 5px 20px rgba(216, 27, 96, 0.4);
				transition: all 0.3s ease;
			}

			.popup button:hover {
				background: linear-gradient(135deg, #ad1457 0%, #e91e63 100%);
				transform: translateY(-2px);
				box-shadow: 0 8px 25px rgba(216, 27, 96, 0.5);
			}

			.popup button:active {
				transform: translateY(0);
			}

			.falling-letter {
				position: absolute;
				top: -100px;
				width: 50px;
				height: auto;
				animation: fall linear;
				cursor: pointer;
				user-select: none;
				z-index: 2;
				animation-duration: 8s;
				filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.2));
				transition: transform 0.3s ease;
			}

			.falling-letter:hover {
				transform: scale(1.2) rotate(10deg);
				filter: drop-shadow(0 10px 20px rgba(216, 27, 96, 0.4));
			}

			@keyframes fall {
				0% {
					transform: translateY(0) translateX(0) rotate(0deg);
					opacity: 1;
				}

				20% {
					transform: translateY(20vh) translateX(-20px) rotate(-10deg);
				}

				40% {
					transform: translateY(40vh) translateX(15px) rotate(8deg);
				}

				60% {
					transform: translateY(60vh) translateX(-15px) rotate(-6deg);
				}

				80% {
					transform: translateY(80vh) translateX(10px) rotate(4deg);
				}

				100% {
					transform: translateY(100vh) translateX(0) rotate(0deg);
					opacity: 0.3;
				}
			}

			@keyframes letterClick {
				0% {
					transform: scale(1) rotate(0deg);
				}

				50% {
					transform: scale(1.3) rotate(360deg);
				}

				100% {
					transform: scale(0) rotate(720deg);
				}
			}

			.letter-clicked {
				animation: letterClick 0.6s ease-out forwards !important;
			}

			.heart {
				position: absolute;
				transform: translate(-50%, -50%);
				animation: explode 2s ease-out forwards;
				pointer-events: none;
				user-select: none;
			}

			@keyframes explode {
				0% {
					transform: translate(-50%, -50%) translate(0, 0);
					opacity: 1;
				}

				100% {
					transform: translate(-50%, -50%) translate(var(--dx), var(--dy))
						scale(1.5);
					opacity: 0;
				}
			}

			.center-gif {
				position: fixed;
				bottom: 20px;
				left: 50%;
				transform: translateX(-50%);
				width: 150px;
				max-width: 40vw;
				z-index: 10;
				pointer-events: none;
			}

			/* ------------------------------
        BOUQUET STYLES & ANIMATIONS
        (UPDATED FOR CSS-DRAWN ROSE)
        ---------------------------------- */

			.rising-bouquet {
				position: fixed;
				bottom: -200px;
				/* Start off-screen */
				left: 50%;
				transform: translateX(-50%);
				width: 250px;
				height: 250px;
				z-index: 5;
				animation: rise 2s ease-out forwards;
				/* Initial rise animation */
			}

			@keyframes rise {
				0% {
					bottom: -200px;
				}

				100% {
					bottom: 50px;
					/* Final position on-screen */
				}
			}

			/* B√îNG H·ªíNG ƒê∆Ø·ª¢C V·∫º B·∫∞NG CSS */
			.rising-bouquet .rose-css {
				position: absolute;
				width: 60px;
				/* K√≠ch th∆∞·ªõc t·ªïng th·ªÉ c·ªßa b√¥ng hoa */
				height: 60px;
				opacity: 0;
				transform: scale(0.5);
				transition: transform 0.2s ease, filter 0.2s ease;
				cursor: pointer;
				z-index: 1;
				/* ƒê·∫£m b·∫£o hoa n·ªïi l√™n */
			}

			/* Hi·ªáu ·ª©ng nh·∫•p nh√°y khi hover */
			.rising-bouquet .rose-css:hover {
				transform: scale(1.1) rotate(5deg) !important;
				filter: drop-shadow(0 0 15px rgba(255, 0, 0, 0.8));
			}

			/* C√ÅNH HOA H·ªíNG (D√πng pseudo-element) */
			.rising-bouquet .rose-css::before {
				content: '';
				position: absolute;
				top: 5px;
				left: 5px;
				width: 50px;
				height: 50px;
				/* D√πng radial-gradient v√† box-shadow ƒë·ªÉ m√¥ ph·ªèng c√°nh hoa */
				background: radial-gradient(
					circle at 30% 30%,
					#ff5252 0%,
					#d32f2f 100%
				);
				border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
				box-shadow: 10px 0 0 -5px #e53935, -10px 0 0 -5px #e53935,
					0 10px 0 -5px #c62828;
				transform: rotate(25deg);
			}

			/* TH√ÇN C√ÇY V√Ä L√Å (D√πng pseudo-element) */
			.rising-bouquet .rose-css::after {
				content: '';
				position: absolute;
				bottom: -15px;
				left: 28px;
				width: 4px;
				height: 30px;
				background-color: #388e3c;
				/* M√†u xanh l√° c√¢y cho th√¢n */
				transform-origin: top center;
				transform: rotate(20deg);
				border-radius: 0 0 5px 5px;
				box-shadow:
                /* L√° 1 */ -15px -5px 0 0 #4caf50,
					/* L√° 2 */ 15px -10px 0 0 #4caf50;
				border-radius: 50%;
			}

			/* Sequential Pop-up Animation (GI·ªÆ NGUY√äN) */
			@keyframes pop-up {
				0% {
					opacity: 0;
					transform: scale(0.5) rotate(-10deg);
				}

				100% {
					opacity: 1;
					transform: scale(1) rotate(0deg);
				}
			}

			/* V·ªä TR√ç C·ª¶A T·ª™NG B√îNG HOA */
			.rose-css-1 {
				top: 150px;
				left: 10px;
				animation: pop-up 0.5s ease-out forwards;
				animation-delay: 2s;
			}

			.rose-css-2 {
				top: 130px;
				left: 80px;
				animation: pop-up 0.5s ease-out forwards;
				animation-delay: 2.3s;
			}

			.rose-css-3 {
				top: 150px;
				left: 150px;
				animation: pop-up 0.5s ease-out forwards;
				animation-delay: 2.6s;
			}

			.rose-css-4 {
				top: 80px;
				left: 40px;
				animation: pop-up 0.5s ease-out forwards;
				animation-delay: 2.9s;
			}

			.rose-css-5 {
				top: 60px;
				left: 110px;
				animation: pop-up 0.5s ease-out forwards;
				animation-delay: 3.2s;
			}

			.rose-css-6 {
				top: 10px;
				left: 70px;
				animation: pop-up 0.5s ease-out forwards;
				animation-delay: 3.5s;
			}

			/* ------------------------------
        Responsive cho m√†n h√¨nh nh·ªè
        ---------------------------------- */
			@media (max-width: 768px) {
				.center-message {
					width: calc(100% - 20px);
					max-width: none;
					padding: 20px 15px;
					font-size: 1.1rem;
					border-radius: 20px;
					left: 50%;
					transform: translate(-50%, -50%);
				}

				.center-message strong {
					font-size: 1.3rem;
					margin-bottom: 10px;
				}

				.popup {
					width: 90%;
					padding: 20px;
					border-radius: 20px;
				}

				.popup img {
					border-radius: 10px;
					margin-bottom: 15px;
				}

				.popup p {
					font-size: 1rem;
					line-height: 1.5;
				}

				.popup button {
					padding: 10px 25px;
					font-size: 0.95rem;
				}

				.falling-letter {
					width: 40px;
					animation-duration: 9s;
				}

				.heart {
					font-size: 18px !important;
				}

				.falling-letter::before {
					content: '';
					position: absolute;
					top: -10px;
					left: -10px;
					right: -10px;
					bottom: -10px;
				}

				.rising-bouquet {
					width: 200px;
					height: 200px;
					bottom: 20px;
				}

				.rising-bouquet .rose-css {
					width: 45px;
					height: 45px;
				}

				.rising-bouquet .rose-css::before {
					width: 40px;
					height: 40px;
				}
			}
		</style>
	</head>

	<body>
		<div class="center-message">
			<strong>Ch√∫c m·ª´ng 20-10</strong>
			<span id="centerText">
				Ng√†y Ph·ª• n·ªØ Vi·ªát Nam<br />
				Mong c·∫≠u lu√¥n r·∫°ng r·ª° nh∆∞ nh·ªØng b√≥ hoa!
			</span>
		</div>

		<img src="./assets/mewmew.gif" alt="GIF" class="center-gif" />
		<div class="popup" id="popup">
			<div class="popup-content">
				<img id="popupImage" src="" alt="L·ªùi ch√∫c" />
				<p id="popupMessage">L·ªùi ch√∫c ·ªü ƒë√¢y</p>
			</div>
		</div>
		<div class="overlay" id="overlay"></div>

		<audio id="player" src="./assets/a.mp3"></audio>
		<div class="rising-bouquet" id="risingBouquet"></div>

		<script>
			//S·ª≠a ·∫£nh v√† l·ªùi nh·∫Øn ·ªü ƒë√¢y
			const messages = [
				{
					img: './assets/a1.jpg', //Thay ·∫£nh
					text: 'Ch√∫c c·∫≠u lu√¥n vui v·∫ª, xinh ƒë·∫πp v√† ng·∫≠p tr√†n y√™u th∆∞∆°ng!' //Thay l·ªùi nh·∫Øn
				},
				{
					img: './assets/a2.jpg',
					text: 'M·ªói ng√†y c·ªßa c·∫≠u ƒë·ªÅu l√† m·ªôt ƒëo√° hoa n·ªü r·ªô.'
				},
				{
					img: './assets/a3.jpg',
					text: 'C·∫£m ∆°n c·∫≠u v√¨ ƒë√£ lu√¥n m·∫°nh m·∫Ω v√† tuy·ªát v·ªùi nh∆∞ th·∫ø!'
				},
				{
					img: './assets/a4.jpg',
					text: 'Ch√∫c c·∫≠u m·ªôt ng√†y 20/10 th·∫≠t h·∫°nh ph√∫c v√† tr·ªçn v·∫πn! '
				},
				{
					img: './assets/a5.jpg',
					text: 'C·∫≠u l√† m√≥n qu√† tuy·ªát v·ªùi nh·∫•t m√† cu·ªôc s·ªëng mang l·∫°i! '
				}
			];

			let currentMessageIndex = 0;
			let hasFirstLetterFallen = false;

			const popup = document.getElementById('popup');
			const overlay = document.getElementById('overlay');
			const popupImage = document.getElementById('popupImage');
			const popupMessage = document.getElementById('popupMessage');
			const centerText = document.getElementById('centerText');
			const risingBouquet = document.getElementById('risingBouquet');

			//Thay nh·ªØng ·∫£nh r∆°i t·ª´ tr√™n xu·ªëng ·ªü ƒë√¢y
			const letterImages = [
				'./assets/letters.png',
				'./assets/q3.png',
				'./assets/h1.png',
				'./assets/h3.png',
				'./assets/t2.png',
				'./assets/t5.png'
			];

			function createHeartExplosion(x, y) {
				//Thay icon khi ·∫•n th∆∞, hoa, qu√†
				const hearts = ['üíó', 'üåπ', 'üíñ']; // Added rose and heart emojis
				const numHearts = 12;

				for (let i = 0; i < numHearts; i++) {
					const heart = document.createElement('div');
					heart.classList.add('heart');
					heart.textContent = hearts[Math.floor(Math.random() * hearts.length)];

					const angle = ((Math.PI * 2) / numHearts) * i;
					const distance = Math.random() * 80 + 40;

					heart.style.left = x + 'px';
					heart.style.top = y + 'px';
					heart.style.setProperty('--dx', Math.cos(angle) * distance + 'px');
					heart.style.setProperty('--dy', Math.sin(angle) * distance + 'px');
					heart.style.fontSize = Math.random() * 10 + 20 + 'px';

					document.body.appendChild(heart);

					setTimeout(() => {
						heart.remove();
					}, 2000);
				}
			}

			function createFallingLetter() {
				const letter = document.createElement('img');
				const randomImage =
					letterImages[Math.floor(Math.random() * letterImages.length)];
				letter.src = randomImage;
				letter.classList.add('falling-letter');
				letter.style.left = Math.random() * (window.innerWidth - 50) + 'px';
				letter.addEventListener('click', e => {
					createHeartExplosion(e.clientX, e.clientY);
					letter.classList.add('letter-clicked');
					setTimeout(() => {
						showPopup();
					}, 300);
				});

				document.body.appendChild(letter);
				z;

				setTimeout(() => {
					letter.remove();
				}, 8000);
			}
			const roseImage = './assets/rose-6870_256.gif';
			// NEW FUNCTION: T·∫°o v√† th√™m b√¥ng h·ªìng (B·∫∞NG DIV - CSS-DRAWN)
			function createRoses() {
				const rosePositions = [
					{ className: 'rose-css-1' },
					{ className: 'rose-css-2' },
					{ className: 'rose-css-3' },
					{ className: 'rose-css-4' },
					{ className: 'rose-css-5' },
					{ className: 'rose-css-6' }
				];

				rosePositions.forEach((pos, index) => {
					const rose = document.createElement('img'); // <--- Thay ƒë·ªïi: DIV sang IMG
					rose.src = roseImage; // <--- Th√™m: G√°n ƒë∆∞·ªùng d·∫´n ·∫£nh

					// Thay ƒë·ªïi class t·ª´ 'rose-css' th√†nh 'rose' ƒë·ªÉ √°p d·ª•ng style m·ªõi
					rose.classList.add('rose', pos.className);

					// Add click listener to each rose
					rose.addEventListener('click', e => {
						// L·∫•y v·ªã tr√≠ cho hi·ªáu ·ª©ng n·ªï tim (c√≥ th·ªÉ d√πng e.clientX/Y cho IMG)
						createHeartExplosion(e.clientX, e.clientY);
						showPopup();
					});

					risingBouquet.appendChild(rose);
				});
			}

			function showPopup() {
				const message = messages[currentMessageIndex];
				popupImage.src = message.img;
				popupMessage.textContent = message.text;
				popup.style.display = 'block';
				overlay.classList.add('active');

				popup.dataset.currentMessage = message.text;

				currentMessageIndex = (currentMessageIndex + 1) % messages.length;
			}

			function closePopup() {
				popup.style.display = 'none';
				overlay.classList.remove('active');

				if (popup.dataset.currentMessage) {
					centerText.innerHTML = popup.dataset.currentMessage;
				}
			}

			document.body.addEventListener('click', function () {
				const player = document.getElementById('player');
				if (player.paused) {
					player.play();
				}
			});

			overlay.addEventListener('click', closePopup);

			// Falling letters interval
			setInterval(() => {
				createFallingLetter();
			}, 1000);

			// Start rose creation on load
			window.addEventListener('load', createRoses);
		</script>
	</body>
</html>
